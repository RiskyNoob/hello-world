<html>

<head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">

    google.charts.load('current', { packages: ['wordtree'] });
    google.charts.setOnLoadCallback(load_json("data/articles_guardian.json", drawChart));

        

        

        function drawChart(json_data) {

            //console.log("Inside drawChart " + json_data);

            var articles = JSON.parse(json_data);
            console.log(articles);

            var data = google.visualization.arrayToDataTable(
                [ ['Phrases'],
                  ['cats are better than dogs'],
                  ['cats eat kibble'],
                  ['cats are better than hamsters'],
                  ['cats are awesome'],
                  ['cats are people too'],
                  ['cats eat mice'],
                  ['cats meowing'],
                  ['cats in the cradle'],
                  ['cats eat mice'],
                  ['cats in the cradle lyrics'],
                  ['cats eat kibble'],
                  ['cats for adoption'],
                  ['cats are family'],
                  ['cats eat mice'],
                  ['cats are better than kittens'],
                  ['cats are evil'],
                  ['cats are weird'],
                  ['cats eat mice'],
                ]
              );


            var options = {
                wordtree: {
                    format: 'implicit',
                    word: 'cats'
                }
            };

            var chart = new google.visualization.WordTree(document.getElementById('wordtree_basic'));
            chart.draw(data, options);
        }

        function load_json(url,callback) {
            var xObj = new XMLHttpRequest();
            xObj.overrideMimeType("application/json");
            //console.log("search url " + url);
            xObj.open('GET', url, true);
            xObj.onreadystatechange = function () {
                if (xObj.readyState == 4 && xObj.status == "200") {
                    //console.log(xObj.responseText);
                    //console.log("articles retrieved from server");
                    console.log("Finished loading articles from file");
                    console.log("Calling back now");
                    callback(xObj.responseText);
                }
            };
            xObj.send();
        }

    </script>
</head>

<body>
    <div id="wordtree_basic" style="width: 900px; height: 500px;"></div>
</body>

</html>